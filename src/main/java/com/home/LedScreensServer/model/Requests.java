package com.home.LedScreensServer.model;

import lombok.Getter;
import org.jnetpcap.util.PcapUtils;

import java.awt.image.BufferedImage;
import java.util.ArrayList;
import java.util.List;

@Getter
public enum Requests {
    DETECT_RECEIVED_CARD1("112233445566222233445566070000ffffff0100435783970900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"),
    DETECT_RECEIVED_CARD2("1122334455662222334455660700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"),
    SCREEN_DRAW1("1122334455662222334455660107000000000000000000000000000000000000000000ff0500ffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"),
    SCREEN_DRAW2("1122334455662222334455660affffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"),
    SCREEN_DRAW_PREF1("11223344556622223344556655"),
    SCREEN_DRAW_PREF2("000000800888");

    private final byte[] request;

    Requests(String request) {
        this.request = PcapUtils.parseHexString(request);
    }

    public static List<byte[]> makeRequestsFromImage(BufferedImage screenFrame) {
        List<byte[]> requests = new ArrayList<>();
        requests.add(Requests.SCREEN_DRAW1.getRequest());
        requests.add(Requests.SCREEN_DRAW2.getRequest());
        for (int y = 0; y < screenFrame.getHeight(); y++) {
            byte[] request = new byte[21 + screenFrame.getWidth() * 3];
            System.arraycopy(Requests.SCREEN_DRAW_PREF1.getRequest(), 0, request, 0, 13);
            request[13] = (byte) ((y >> 8) & 0xff);
            request[14] = (byte) (y & 0xff);
            System.arraycopy(Requests.SCREEN_DRAW_PREF2.getRequest(), 0, request, 15, 6);
            for (int x = 0; x < screenFrame.getWidth(); x++) {
                int rgb = screenFrame.getRGB(x, y);
                request[22 + x * 3] = (byte) ((rgb >> 16) & 0xff);
                request[21 + x * 3] = (byte) ((rgb >> 8) & 0xff);
                request[23 + x * 3] = (byte) (rgb & 0xff);
            }
            requests.add(request);
        }

        return requests;
    }
}
//detect
//pcapSender.sendPacket(PcapUtils.parseHexString("1122334455662222334455660700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"));
//pcapSender.sendPacket(PcapUtils.parseHexString("1122334455662222334455660700000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"));


//screen
//pcapSender.sendPacket(PcapUtils.parseHexString("1122334455662222334455660107000000000000000000000000000000000000000000ff0500ffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"));
//pcapSender.sendPacket(PcapUtils.parseHexString("1122334455662222334455660affffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"));
//
//        pcapSender.sendPacket(PcapUtils.parseHexString("11223344556622223344556655 0000 000000800888 0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff"));
//        pcapSender.sendPacket(PcapUtils.parseHexString("11223344556622223344556655 0001 000000800888 000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"));
//        pcapSender.sendPacket(PcapUtils.parseHexString("1122334455662222334455665500020000008008880000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff"));
//        pcapSender.sendPacket(PcapUtils.parseHexString("112233445566222233445566550003000000800888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"));
//        pcapSender.sendPacket(PcapUtils.parseHexString("1122334455662222334455665500040000008008880000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff0000ff"));

//pcapSender.sendPacket(PcapUtils.parseHexString("1122334455662222334455660107000000000000000000000000000000000000000000ff0500ffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"));
//pcapSender.sendPacket(PcapUtils.parseHexString("1122334455662222334455660affffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"));

